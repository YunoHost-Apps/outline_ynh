#:schema https://raw.githubusercontent.com/YunoHost/apps/master/schemas/tests.v1.schema.json

test_format = 1.0

[default]

    # ------------
    # Tests to run
    # ------------

    preinstall = """
    sudo yunohost tools update apps
    sudo yunohost domain add dex.domain.tld
    sudo yunohost domain add dexold.domain.tld
    sudo yunohost app install https://github.com/YunoHost-Apps/dex_ynh -f -a "domain=dex.domain.tld&path=/&oidc_name=&oidc_secret=&oidc_callback"
    """

    preupgrade = """
    sudo yunohost app upgrade dex -u https://github.com/YunoHost-Apps/dex_ynh -F || true
    """

    # -------------------------------
    # Default args to use for install
    # -------------------------------

    # -------------------------------
    # Commits to test upgrade from
    # -------------------------------

    test_upgrade_from.69d799a309f9033bafff679653e3a9b62ab6e16b.name = "Upgrade from 0.87.3~ynh2"
